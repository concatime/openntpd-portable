From 4a5c305fcbc8926ce33c3759eabfad6c5b5b4566 Mon Sep 17 00:00:00 2001
From: Brent Cook <busterb@gmail.com>
Date: Thu, 1 Jan 2015 07:18:11 -0600
Subject: [PATCH 06/21] allow overriding default user and file locations

Allow the build process to override the default ntpd file paths and
default user.
---
 src/usr.sbin/ntpd/ntpd.h | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

diff --git a/src/usr.sbin/ntpd/ntpd.h b/src/usr.sbin/ntpd/ntpd.h
index 9305cf0c..bfed5219 100644
--- a/src/usr.sbin/ntpd/ntpd.h
+++ b/src/usr.sbin/ntpd/ntpd.h
@@ -36,10 +36,22 @@
 
 #define MAXIMUM(a, b)	((a) > (b) ? (a) : (b))
 
-#define	NTPD_USER	"_ntp"
-#define	CONFFILE	"/etc/ntpd.conf"
-#define DRIFTFILE	"/var/db/ntpd.drift"
-#define	CTLSOCKET	"/var/run/ntpd.sock"
+#ifndef SYSCONFDIR
+#define SYSCONFDIR "/etc"
+#endif
+#ifndef RUNSTATEDIR
+#define RUNSTATEDIR LOCALSTATEDIR "/run"
+#endif
+#ifndef LOCALSTATEDIR
+#define LOCALSTATEDIR "/var"
+#endif
+
+#ifndef NTPD_USER
+#define NTPD_USER "_ntp"
+#endif
+#define CONFFILE     SYSCONFDIR "/ntpd.conf"
+#define DRIFTFILE LOCALSTATEDIR "/db/ntpd.drift"
+#define CTLSOCKET   RUNSTATEDIR "/ntpd.sock"
 
 #define	INTERVAL_QUERY_NORMAL		30	/* sync to peers every n secs */
 #define	INTERVAL_QUERY_PATHETIC		60
-- 
2.31.1
